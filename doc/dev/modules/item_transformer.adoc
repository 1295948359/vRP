ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]
:toc: left
:toclevels: 5

= ItemTransformer

This module adds item transformers.

* it's a generic system to transform (generate, process, convert) items and money to other items or money in a specific area
* each transformer can take things to generate other things, using a unit of work
* units are regenerated periodically at a specific rate
* reagents => products (reagents can be nothing to create an harvest transformer)

== Extension

=== Transformer

[source,lua]
----
self.id = id
self.cfg = cfg
self.units = 0
self.users = {} -- map of user => recipe name

Transformer:unbindUser(user)

Transformer:bindUser(user, recipe_name)

Transformer:unbindAll()
----

=== Server

[source,lua]
----
self.cfg
self.transformers -- map of id => transformer

-- add an item transformer
-- id: transformer identitifer (string)
-- cfg: item transformer config
--- name
--- max_units
--- units_per_minute
--- x,y,z,radius,height (area properties)
--- r,g,b (color)
--- permissions: (optional)
--- recipes: map of recipe name => recipe {}
---- description
---- in_money
---- out_money
---- reagents: items as fullid => amount
---- products: items as fullid => amount
---- aptitudes: (optional) aptitudes production as "group.aptitude" => exp
---- permissions: (optional) recipe permissions
ItemTransformer:set(id, cfg)

-- remove an item transformer
ItemTransformer:remove(id)
----

== Menu

=== item_transformer

Item transformer menu.

.data
[horizontal]
itemtr:: item transformer
